# Template file for 'rtl8192eu-dkms'
pkgname=rtl8192eu-dkms
version=20210111
revision=2
_modver=2021.01.11
_gitrev=faf68bbf82623335e7997a473f9222751e275927
archs="*"
wrksrc="rtl8192eu-linux-driver-${_gitrev}"
depends="dkms bc"
short_desc="Realtek 8192EU USB WiFi driver (DKMS)"
maintainer="Phicem <phicem@gmx.com>"
license="GPL-2.0-only"
homepage="https://github.com/Mange/rtl8192eu-linux-driver"
distfiles="https://github.com/Mange/rtl8192eu-linux-driver/archive/${_gitrev}.tar.gz"
checksum=f6988f1f0a4128cf935c2d09cd45a782f46414dc1a8d7c992c05ed7d565ac922
dkms_modules="rtl8192eu ${_modver}"

do_install() {
	local dest=/usr/src/rtl8192eu-${_modver}

	vmkdir ${dest}
	cp -r dkms.conf Kconfig Makefile platform core hal include os_dep ${DESTDIR}/${dest}

	# modules-load.d(5) file.
	vmkdir usr/lib/modules-load.d
	echo "8192eu" > ${DESTDIR}/usr/lib/modules-load.d/${pkgname}.conf
	chmod 644 ${DESTDIR}/usr/lib/modules-load.d/${pkgname}.conf
}
