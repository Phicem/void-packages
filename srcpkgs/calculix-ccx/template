# Template file for 'calculix-ccx'
pkgname=calculix-ccx
version=2.19
revision=1
wrksrc=CalculiX
_ccx_dir=ccx_${version}
_LIBS=" /usr/lib/spooles.a /usr/lib/libarpack.so /lib64/libopenblas.so  -lpthread -lm -lc"
_FFLAGS=" -Wall -O2 -fallow-argument-mismatch"
makedepends="gcc-fortran SPOOLES arpack-ng-devel libgomp-devel openblas-devel"
short_desc="3D Structural Finite Element Program - Solver part"
maintainer="Phicem <phicem@gmx.com>"
license="GPL-2.0-or-later"
homepage="http://www.dhondt.de/"
distfiles="http://www.dhondt.de/ccx_${version}.src.tar.bz2"
checksum=c75a69685811e7996c9428b491c82f0eff777cc9a0999f469d10156d75f26d07
CFLAGS=" -Wall -O2  -I /usr/include/SPOOLES-2.2 -DARCH='Linux' -DSPOOLES -DARPACK -DMATRIXSTORAGE -DNETWORKOUT"

do_build() {
	make -C ${_ccx_dir}/src LIBS="$_LIBS" FFLAGS="$_FFLAGS" CFLAGS="$CFLAGS"
}

do_install() {
	vbin ${_ccx_dir}/src/ccx_2.19 ccx
}
